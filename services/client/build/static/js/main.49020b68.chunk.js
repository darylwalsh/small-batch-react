(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(62)},62:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(28),s=a.n(r),i=a(2),c=a(9),m=a(10),o=a(12),u=a(11),d=a(13),h=a(3),E=a(14),b=a.n(E),g=a(8),v=function(e){return l.a.createElement("div",null,l.a.createElement("h1",{className:"title is-1"},"All Users"),l.a.createElement("hr",null),l.a.createElement("br",null),l.a.createElement("table",{className:"table is-hoverable is-fullwidth"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"ID"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Username"),l.a.createElement("th",null,"Active"),l.a.createElement("th",null,"Admin"))),l.a.createElement("tbody",null,e.users.map(function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,e.id),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.username),l.a.createElement("td",null,String(e.active)),l.a.createElement("td",null,String(e.admin)))}))))},p=function(){return l.a.createElement("div",null,l.a.createElement("h1",{className:"title is-1"},"About"),l.a.createElement("hr",null),l.a.createElement("br",null),l.a.createElement("p",null,"Add something relevant here."))},f=function(e){return l.a.createElement("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation"},l.a.createElement("section",{className:"container"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement("strong",{className:"navbar-item"},e.title),l.a.createElement("span",{className:"nav-toggle navbar-burger",onClick:function(){var e=document.querySelector(".nav-toggle"),t=document.querySelector(".navbar-menu");e.classList.toggle("is-active"),t.classList.toggle("is-active")}},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null))),l.a.createElement("div",{className:"navbar-menu"},l.a.createElement("div",{className:"navbar-start"},l.a.createElement(i.b,{to:"/",className:"navbar-item"},"Home"),l.a.createElement(i.b,{to:"/about",className:"navbar-item"},"About"),e.isAuthenticated&&l.a.createElement(i.b,{to:"/status",className:"navbar-item"},"User Status")),l.a.createElement("div",{className:"navbar-end"},!e.isAuthenticated&&l.a.createElement(i.b,{to:"/register",className:"navbar-item"},"Register"),!e.isAuthenticated&&l.a.createElement(i.b,{to:"/login",className:"navbar-item"},"Log In"),e.isAuthenticated&&l.a.createElement(i.b,{to:"/logout",className:"navbar-item"},"Log Out")))))},S=function(e){return e.isAuthenticated?l.a.createElement(g.a,{to:"/"}):l.a.createElement("div",null,"Login"===e.formType&&l.a.createElement("h1",{className:"title is-1"},"Log In"),"Register"===e.formType&&l.a.createElement("h1",{className:"title is-1"},"Register"),l.a.createElement("hr",null),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:function(t){return e.handleUserFormSubmit(t)}},"Register"===e.formType&&l.a.createElement("div",{className:"field"},l.a.createElement("input",{name:"username",className:"input is-medium",type:"text",placeholder:"Enter a username",required:!0,value:e.formData.username,onChange:e.handleFormChange})),l.a.createElement("div",{className:"field"},l.a.createElement("input",{name:"email",className:"input is-medium",type:"email",placeholder:"Enter an email address",required:!0,value:e.formData.email,onChange:e.handleFormChange})),l.a.createElement("div",{className:"field"},l.a.createElement("input",{name:"password",className:"input is-medium",type:"password",placeholder:"Enter a password",required:!0,value:e.formData.password,onChange:e.handleFormChange})),l.a.createElement("input",{type:"submit",className:"button is-primary is-medium is-fullwidth",value:"Submit"})))},y=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.logoutUser()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("p",null,"You are now logged out. Click ",l.a.createElement(i.b,{to:"/login"},"here")," to log back in."))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={email:"",id:"",username:"",active:"",admin:""},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.isAuthenticated&&this.getUserStatus()}},{key:"getUserStatus",value:function(e){var t=this,a={url:"".concat("http://localhost","/auth/status"),method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(window.localStorage.authToken)}};return b()(a).then(function(e){t.setState({email:e.data.data.email,id:e.data.data.id,username:e.data.data.username,active:String(e.data.data.active),admin:String(e.data.data.admin)})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return this.props.isAuthenticated?l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"User ID:")," ",this.state.id),l.a.createElement("li",null,l.a.createElement("strong",null,"Email:")," ",this.state.email),l.a.createElement("li",null,l.a.createElement("strong",null,"Username:")," ",this.state.username),l.a.createElement("li",null,l.a.createElement("strong",null,"Active:")," ",this.state.active),l.a.createElement("li",null,l.a.createElement("strong",null,"Admin:")," ",this.state.admin))):l.a.createElement("p",null,"You must be logged in to view this. Click"," ",l.a.createElement(i.b,{to:"/login"},"here")," to log back in.")}}]),t}(n.Component),A=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={users:[],username:"",email:"",title:"TestDriven.io",formData:{username:"",email:"",password:""},isAuthenticated:!1},e.addUser=e.addUser.bind(Object(h.a)(Object(h.a)(e))),e.handleChange=e.handleChange.bind(Object(h.a)(Object(h.a)(e))),e.handleUserFormSubmit=e.handleUserFormSubmit.bind(Object(h.a)(Object(h.a)(e))),e.handleFormChange=e.handleFormChange.bind(Object(h.a)(Object(h.a)(e))),e.logoutUser=e.logoutUser.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"getUsers",value:function(){var e=this;b.a.get("".concat("http://localhost","/users")).then(function(t){e.setState({users:t.data.data.users})}).catch(function(e){console.log(e)})}},{key:"addUser",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,email:this.state.email};b.a.post("".concat("http://localhost","/users"),a).then(function(e){t.getUsers(),t.setState({username:"",email:""})}).catch(function(e){console.log(e)})}},{key:"handleChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleFormChange",value:function(e){var t=this.state.formData;t[e.target.name]=e.target.value,this.setState(t)}},{key:"handleUserFormSubmit",value:function(e){var t=this;e.preventDefault();var a=window.location.href.split("/").reverse()[0],n={email:this.state.formData.email,password:this.state.formData.password};"register"===a&&(n.username=this.state.formData.username);var l="".concat("http://localhost","/auth/").concat(a);b.a.post(l,n).then(function(e){t.clearFormState(),window.localStorage.setItem("authToken",e.data.auth_token),t.setState({isAuthenticated:!0}),t.getUsers()}).catch(function(e){console.log(e)})}},{key:"clearFormState",value:function(){this.setState({formData:{username:"",email:"",password:""},username:"",email:""})}},{key:"logoutUser",value:function(){window.localStorage.clear(),this.setState({isAuthenticated:!1})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(f,{title:this.state.title,isAuthenticated:this.state.isAuthenticated}),l.a.createElement("section",{className:"section"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("br",null),l.a.createElement(g.d,null,l.a.createElement(g.b,{exact:!0,path:"/",render:function(){return l.a.createElement(v,{users:e.state.users})}}),l.a.createElement(g.b,{exact:!0,path:"/about",component:p}),l.a.createElement(g.b,{exact:!0,path:"/register",render:function(){return l.a.createElement(S,{formType:"Register",formData:e.state.formData,handleUserFormSubmit:e.handleUserFormSubmit,handleFormChange:e.handleFormChange,isAuthenticated:e.state.isAuthenticated})}}),l.a.createElement(g.b,{exact:!0,path:"/login",render:function(){return l.a.createElement(S,{formType:"Login",formData:e.state.formData,handleUserFormSubmit:e.handleUserFormSubmit,handleFormChange:e.handleFormChange,isAuthenticated:e.state.isAuthenticated})}}),l.a.createElement(g.b,{exact:!0,path:"/logout",render:function(){return l.a.createElement(y,{logoutUser:e.logoutUser,isAuthenticated:e.state.isAuthenticated})}}),l.a.createElement(g.b,{exact:!0,path:"/status",render:function(){return l.a.createElement(N,{isAuthenticated:e.state.isAuthenticated})}})))))))}}]),t}(n.Component);s.a.render(l.a.createElement(i.a,null,l.a.createElement(A,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.49020b68.chunk.js.map