{"ast":null,"code":"import _classCallCheck from \"/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/src/App.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Route, Switch } from 'react-router-dom';\nimport UsersList from './components/UsersList';\nimport About from './components/About';\nimport NavBar from './components/NavBar';\nimport Form from './components/Form';\nimport Logout from './components/Logout';\nimport UserStatus from './components/UserStatus';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n    _this.state = {\n      users: [],\n      username: '',\n      email: '',\n      title: 'TestDriven.io',\n      formData: {\n        username: '',\n        email: '',\n        password: ''\n      },\n      isAuthenticated: false\n    };\n    _this.addUser = _this.addUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUserFormSubmit = _this.handleUserFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleFormChange = _this.handleFormChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logoutUser = _this.logoutUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUsers();\n    }\n  }, {\n    key: \"getUsers\",\n    value: function getUsers() {\n      var _this2 = this;\n\n      axios.get(\"\".concat(process.env.REACT_APP_USERS_SERVICE_URL, \"/users\")).then(function (res) {\n        _this2.setState({\n          users: res.data.data.users\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"addUser\",\n    value: function addUser(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      var data = {\n        username: this.state.username,\n        email: this.state.email\n      };\n      axios.post(\"\".concat(process.env.REACT_APP_USERS_SERVICE_URL, \"/users\"), data).then(function (res) {\n        _this3.getUsers();\n\n        _this3.setState({\n          username: '',\n          email: ''\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var obj = {};\n      obj[event.target.name] = event.target.value;\n      this.setState(obj);\n    }\n  }, {\n    key: \"handleFormChange\",\n    value: function handleFormChange(event) {\n      var obj = this.state.formData;\n      obj[event.target.name] = event.target.value;\n      this.setState(obj);\n    }\n  }, {\n    key: \"handleUserFormSubmit\",\n    value: function handleUserFormSubmit(event) {\n      var _this4 = this;\n\n      event.preventDefault();\n      var formType = window.location.href.split('/').reverse()[0];\n      var data = {\n        email: this.state.formData.email,\n        password: this.state.formData.password\n      };\n\n      if (formType === 'register') {\n        data.username = this.state.formData.username;\n      }\n\n      var url = \"\".concat(process.env.REACT_APP_USERS_SERVICE_URL, \"/auth/\").concat(formType);\n      axios.post(url, data).then(function (res) {\n        _this4.clearFormState();\n\n        window.localStorage.setItem('authToken', res.data.auth_token);\n\n        _this4.setState({\n          isAuthenticated: true\n        });\n\n        _this4.getUsers();\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"clearFormState\",\n    value: function clearFormState() {\n      this.setState({\n        formData: {\n          username: '',\n          email: '',\n          password: ''\n        },\n        username: '',\n        email: ''\n      });\n    }\n  }, {\n    key: \"logoutUser\",\n    value: function logoutUser() {\n      window.localStorage.clear();\n      this.setState({\n        isAuthenticated: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        title: this.state.title,\n        isAuthenticated: this.state.isAuthenticated,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(\"section\", {\n        className: \"section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-half\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(UsersList, {\n            users: _this5.state.users,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/about\",\n        component: About,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/register\",\n        render: function render() {\n          return React.createElement(Form, {\n            formType: 'Register',\n            formData: _this5.state.formData,\n            handleUserFormSubmit: _this5.handleUserFormSubmit,\n            handleFormChange: _this5.handleFormChange,\n            isAuthenticated: _this5.state.isAuthenticated,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/login\",\n        render: function render() {\n          return React.createElement(Form, {\n            formType: 'Login',\n            formData: _this5.state.formData,\n            handleUserFormSubmit: _this5.handleUserFormSubmit,\n            handleFormChange: _this5.handleFormChange,\n            isAuthenticated: _this5.state.isAuthenticated,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/logout\",\n        render: function render() {\n          return React.createElement(Logout, {\n            logoutUser: _this5.logoutUser,\n            isAuthenticated: _this5.state.isAuthenticated,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/status\",\n        render: function render() {\n          return React.createElement(UserStatus, {\n            isAuthenticated: _this5.state.isAuthenticated,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 165\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/barko187/Workspace/smallbatchreact.io/fork-small-batch-react/services/client/src/App.jsx"],"names":["React","Component","axios","Route","Switch","UsersList","About","NavBar","Form","Logout","UserStatus","App","state","users","username","email","title","formData","password","isAuthenticated","addUser","bind","handleChange","handleUserFormSubmit","handleFormChange","logoutUser","getUsers","get","process","env","REACT_APP_USERS_SERVICE_URL","then","res","setState","data","catch","err","console","log","event","preventDefault","post","obj","target","name","value","formType","window","location","href","split","reverse","url","clearFormState","localStorage","setItem","auth_token","clear"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Route, Switch } from 'react-router-dom'\n\nimport UsersList from './components/UsersList'\nimport About from './components/About'\nimport NavBar from './components/NavBar'\nimport Form from './components/Form'\nimport Logout from './components/Logout'\nimport UserStatus from './components/UserStatus'\n\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      users: [],\n      username: '',\n      email: '',\n      title: 'TestDriven.io',\n      formData: {\n        username: '',\n        email: '',\n        password: '',\n      },\n      isAuthenticated: false,\n    }\n    this.addUser = this.addUser.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.handleUserFormSubmit = this.handleUserFormSubmit.bind(this)\n    this.handleFormChange = this.handleFormChange.bind(this)\n    this.logoutUser = this.logoutUser.bind(this)\n  }\n  componentDidMount() {\n    this.getUsers()\n  }\n  getUsers() {\n    axios\n      .get(`${process.env.REACT_APP_USERS_SERVICE_URL}/users`)\n      .then(res => {\n        this.setState({ users: res.data.data.users })\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n  addUser(event) {\n    event.preventDefault()\n    const data = {\n      username: this.state.username,\n      email: this.state.email,\n    }\n    axios\n      .post(`${process.env.REACT_APP_USERS_SERVICE_URL}/users`, data)\n      .then(res => {\n        this.getUsers()\n        this.setState({ username: '', email: '' })\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n  handleChange(event) {\n    const obj = {}\n    obj[event.target.name] = event.target.value\n    this.setState(obj)\n  }\n  handleFormChange(event) {\n    const obj = this.state.formData\n    obj[event.target.name] = event.target.value\n    this.setState(obj)\n  }\n  handleUserFormSubmit(event) {\n    event.preventDefault()\n    const formType = window.location.href.split('/').reverse()[0]\n    let data = {\n      email: this.state.formData.email,\n      password: this.state.formData.password,\n    }\n    if (formType === 'register') {\n      data.username = this.state.formData.username\n    }\n    const url = `${process.env.REACT_APP_USERS_SERVICE_URL}/auth/${formType}`\n    axios\n      .post(url, data)\n      .then(res => {\n        this.clearFormState()\n        window.localStorage.setItem('authToken', res.data.auth_token)\n        this.setState({ isAuthenticated: true })\n        this.getUsers()\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n  clearFormState() {\n    this.setState({\n      formData: { username: '', email: '', password: '' },\n      username: '',\n      email: '',\n    })\n  }\n  logoutUser() {\n    window.localStorage.clear()\n    this.setState({ isAuthenticated: false })\n  }\n  render() {\n    return (\n      <div>\n        <NavBar\n          title={this.state.title}\n          isAuthenticated={this.state.isAuthenticated}\n        />\n        <section className=\"section\">\n          <div className=\"container\">\n            <div className=\"columns\">\n              <div className=\"column is-half\">\n                <br />\n                <Switch>\n                  <Route\n                    exact\n                    path=\"/\"\n                    render={() => <UsersList users={this.state.users} />}\n                  />\n                  <Route exact path=\"/about\" component={About} />\n                  <Route\n                    exact\n                    path=\"/register\"\n                    render={() => (\n                      <Form\n                        formType={'Register'}\n                        formData={this.state.formData}\n                        handleUserFormSubmit={this.handleUserFormSubmit}\n                        handleFormChange={this.handleFormChange}\n                        isAuthenticated={this.state.isAuthenticated}\n                      />\n                    )}\n                  />\n                  <Route\n                    exact\n                    path=\"/login\"\n                    render={() => (\n                      <Form\n                        formType={'Login'}\n                        formData={this.state.formData}\n                        handleUserFormSubmit={this.handleUserFormSubmit}\n                        handleFormChange={this.handleFormChange}\n                        isAuthenticated={this.state.isAuthenticated}\n                      />\n                    )}\n                  />\n                  <Route\n                    exact\n                    path=\"/logout\"\n                    render={() => (\n                      <Logout\n                        logoutUser={this.logoutUser}\n                        isAuthenticated={this.state.isAuthenticated}\n                      />\n                    )}\n                  />\n                  <Route\n                    exact\n                    path=\"/status\"\n                    render={() => (\n                      <UserStatus\n                        isAuthenticated={this.state.isAuthenticated}\n                      />\n                    )}\n                  />\n                </Switch>\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}